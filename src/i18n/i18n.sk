# get translation
function i18n(p: player, path: text, color: text = "") :: text:
  set {_lang} to player_settings_get({_p}, "lang")
  if {_lang} is not set:
    set {_lang} to {LANG_FALLBACK}
  set {_text} to yaml value {_path} in upper case from "YAML-LANG-%{_lang}%"
  return "%{_color}%%{_text}%"